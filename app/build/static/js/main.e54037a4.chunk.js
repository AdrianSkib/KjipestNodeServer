(this["webpackJsonpkjipest-app"]=this["webpackJsonpkjipest-app"]||[]).push([[0],{100:function(e,t,a){e.exports=a(193)},105:function(e,t,a){},107:function(e,t,a){},190:function(e,t,a){e.exports=a.p+"static/media/rain.701bc143.svg"},191:function(e,t,a){e.exports=a.p+"static/media/partlycloudy.aa3b800f.svg"},192:function(e,t,a){e.exports=a.p+"static/media/logo.617bcacd.svg"},193:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),l=a.n(i),s=(a(105),a(23)),c=a.n(s),o=a(41),d=a(90),m=a(91),u=a(99),h=a(97),v=(a(107),a(61)),p=a.n(v),E=a(98),g=a(42),f=a(96),w=(a(186),a(62)),y=a.n(w),x=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).listRef=r.a.createRef(),e.Row=function(t){var n=t.index,i=t.style;return e.state.flipList&&(n=e.state.data.length-n-3>0?e.state.data.length-n-3:0),r.a.createElement("div",{id:"listelement",style:i},r.a.createElement("div",{className:"elementelement",id:"rank"},n+1),r.a.createElement("div",{className:"elementelement",id:"location"},e.state.data[n].location),r.a.createElement("div",{className:"elementelement",id:"score"},e.state.data[n].kjipestScore.toFixed(2)),r.a.createElement("div",{className:"elementelement",id:"icon"},r.a.createElement("img",{src:a(190),alt:""})))},e.onSelect=function(t,a){e.state.flipList?e.listRef.current.scrollToItem(e.state.data.length-a.index-3,"start"):e.listRef.current.scrollToItem(a.index,"start"),e.setState({searchingFor:t})},e.renderItem=function(e){return r.a.createElement("div",{className:"searchItem"},e.location)},e.renderMenu=function(t,a,n){e.cellHeightCache.clearAll();return r.a.createElement(g.c,{rowHeight:e.cellHeightCache.rowHeight,height:207,rowCount:t.length,rowRenderer:function(a){var n=a.key,i=a.index,l=a.parent,s=a.style,c=t[i];return r.a.createElement(g.a,{cache:e.cellHeightCache,key:n,parent:l,rowIndex:i},r.a.cloneElement(c,{style:s,key:n,onMouseEnter:null,onMouseDown:function(e){0===e.button&&c.props.onClick(e)}}))},width:n.minWidth||0,style:{height:"auto",maxHeight:"207px"}})},e.handleResize=function(t){var a=document.getElementById("main"),n=document.getElementById("list"),r=document.getElementById("categories");document.getElementById("crank"),document.getElementById("cloc"),document.getElementById("cscore"),document.getElementById("cicon");a.style.height=window.innerHeight-160+"px",n.style.width=window.innerWidth-300+"px",r.style.width=window.innerWidth-300+"px",window.innerWidth<=e.state.mobileWidth&&(n.style.width="100%",r.style.width="100%"),e.setState({width:window.innerWidth})},e.cellHeightCache=new g.b({defaultHeight:42,fixedWidth:!0}),e.state={data:[],searchingFor:"",gotData:!1,currentLoc:"Laster din posisjon",currentIndex:-1,currentScore:-1,flipList:!1,orderText:"Kjipest \u2013 Minst kjipt \u2193",locData:{},hasPos:!1,lat:"",lon:"",width:window.innerWidth,mobileWidth:1e3},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",this.handleResize),e.next=3,p.a.get("http://kjipestnodeserver.azurewebsites.net/sorted");case 3:return t=e.sent,e.next=6,t.data;case 6:if(a=e.sent,n=a.map((function(e,t){return e.index=t,e})),this.setState({data:n,gotData:!0}),r=this.state.width,r<=this.state.mobileWidth||(document.getElementById("main").style.height=window.innerHeight-160+"px",document.getElementById("list").style.width=window.innerWidth-300+"px",document.getElementById("categories").style.width=window.innerWidth-300+"px"),!navigator.geolocation){e.next=17;break}return i=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("http://kjipestnodeserver.azurewebsites.net/lonlat/"+t.coords.longitude+"&"+t.coords.latitude);case 2:return a=e.sent,e.next=5,a.data;case 5:r=e.sent,i=n.find((function(e){return e.location===r.location})),this.setState({locData:r,currentLoc:r.location,currentIndex:i.index,currentScore:r.kjipestScore}),this.setState({lat:t.coords.latitude,lon:t.coords.longitude,hasPos:!0});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.next=17,navigator.geolocation.getCurrentPosition(i.bind(this));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("resize",this.handleResize);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"KjipestList",value:function(){var e=this;return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{flex:"1 1 auto",height:"100vh"}},r.a.createElement(f.a,null,(function(t){var a=t.height,n=t.width;return r.a.createElement(E.a,{className:"List",height:a,itemCount:e.state.data.length,itemSize:70,width:n,ref:e.listRef,itemData:e.state.flipList},e.Row)}))))}},{key:"getLocalScore",value:function(){return this.state.currentScore<0?"__":this.state.currentScore.toFixed(2)}},{key:"getLocalPercentage",value:function(){return this.state.currentScore<0?"__":(this.state.currentIndex/this.state.data.length*100).toFixed(1).toString()+" %"}},{key:"renderPage",value:function(){var e=this,t=this.state.searchingFor,n=t?this.state.data.filter((function(e){return e.location.toLowerCase().includes(t.toLowerCase())})):[];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav",id:"search"},r.a.createElement(y.a,{items:n,value:this.state.searchingFor,renderItem:this.renderItem,renderMenu:this.renderMenu,getItemValue:function(e){return e.location},onChange:function(t,a){return e.setState({searchingFor:a})},onSelect:this.onSelect,inputProps:{placeholder:"s\xf8k"}})),r.a.createElement("div",{className:"nav",id:"navlist"},r.a.createElement("h2",null,"Liste")),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"Kart")),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"Info")))),r.a.createElement("div",{className:"subheader"},r.a.createElement("div",{id:"categories"},r.a.createElement("div",{className:"head",id:"crank"},r.a.createElement("h3",null,"Rangering")),r.a.createElement("div",{className:"head",id:"cloc"},r.a.createElement("h3",null,"Sted")),r.a.createElement("div",{className:"head",id:"cscore"},r.a.createElement("h3",{onClick:function(){e.state.flipList?(e.setState({orderText:"Kjipest \u2013 Minst kjipt \u2193",flipList:!1}),e.listRef.current.scrollToItem(0,"start")):(e.setState({orderText:"Kjipest \u2013 Minst kjipt \u2191",flipList:!0}),e.listRef.current.scrollToItem(0,"start"))}},this.state.orderText)),r.a.createElement("div",{className:"head",id:"cicon"},r.a.createElement("h3",null,"V\xe6rtyper"))),r.a.createElement("div",{id:"locName"},r.a.createElement("p",null,this.state.currentLoc),r.a.createElement("h3",null,"(Din posisjon)"))),r.a.createElement("div",{id:"main"},r.a.createElement("div",{id:"list"},this.KjipestList()),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"localinfo"},r.a.createElement("div",{id:"localscore"},r.a.createElement("h3",null,"Score:"),r.a.createElement("h1",null,this.getLocalScore())),r.a.createElement("img",{src:a(191),alt:""}),r.a.createElement("div",{className:"localrank"},r.a.createElement("h1",{className:"localpercentage"},this.getLocalPercentage()),r.a.createElement("h3",{className:"localpercentagebottom"},"av Norge har det kjipere enn deg"))),r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:a(192),alt:""})))),r.a.createElement("script",{type:"text/javascript",src:"./script.js"}))}},{key:"renderMobilePage",value:function(){var e=this,t=this.state.searchingFor,a=t?this.state.data.filter((function(e){return e.location.toLowerCase().includes(t.toLowerCase())})):[];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav",id:"search"},r.a.createElement(y.a,{items:a,value:this.state.searchingFor,renderItem:this.renderItem,renderMenu:this.renderMenu,getItemValue:function(e){return e.location},onChange:function(t,a){return e.setState({searchingFor:a})},onSelect:this.onSelect,inputProps:{placeholder:"s\xf8k"}})),r.a.createElement("div",{className:"nav",id:"navlist"},r.a.createElement("h2",null,"Liste")),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"Deg")),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"Kart")),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"Info")))),r.a.createElement("div",{className:"subheader"},r.a.createElement("div",{id:"categories"},r.a.createElement("div",{className:"head",id:"crank"},r.a.createElement("h3",null,"Rangering")),r.a.createElement("div",{className:"head",id:"cloc"},r.a.createElement("h3",null,"Sted")),r.a.createElement("div",{className:"head",id:"cscore"},r.a.createElement("h3",{onClick:function(){e.state.flipList?(e.setState({orderText:"Kjipest \u2013 Minst kjipt \u2193",flipList:!1}),e.listRef.current.scrollToItem(0,"start")):(e.setState({orderText:"Kjipest \u2013 Minst kjipt \u2191",flipList:!0}),e.listRef.current.scrollToItem(0,"start"))}},this.state.orderText)),r.a.createElement("div",{className:"head",id:"cicon"},r.a.createElement("h3",null,"V\xe6rtyper")))),r.a.createElement("div",{id:"main"},r.a.createElement("div",{id:"list",style:{width:"100%"}},this.KjipestList())),r.a.createElement("script",{type:"text/javascript",src:"./script.js"}))}},{key:"render",value:function(){var e=this.state.width,t=e<=this.state.mobileWidth;return console.log(e),t?(this.state.gotData,r.a.createElement("div",null,this.renderMobilePage())):this.state.gotData?r.a.createElement("div",null,this.renderPage()):r.a.createElement("div",null)}}]),n}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.e54037a4.chunk.js.map